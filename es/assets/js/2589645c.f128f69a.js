"use strict";(self.webpackChunktiny=self.webpackChunktiny||[]).push([[903],{4602:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>u,frontMatter:()=>r,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"node","title":"Nodo de Lightning","description":"Omite esta p\xe1gina si est\xe1s usando Albyhub con LDK, y simplemente contin\xfaa directamente a configurar Albyhub.","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/node.md","sourceDirName":".","slug":"/node","permalink":"/tiny-lightning-node-tutorial/es/node","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"Nodo de Lightning","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Inicializaci\xf3n","permalink":"/tiny-lightning-node-tutorial/es/initialization"},"next":{"title":"Lightning Hub","permalink":"/tiny-lightning-node-tutorial/es/hub"}}');var s=i(4848),o=i(8453);const r={title:"Nodo de Lightning",sidebar_position:3},t="Nodo de Lightning",d={},l=[{value:"Phoenixd",id:"phoenixd",level:2},{value:"Instala y ejecuta la imagen de Docker",id:"instala-y-ejecuta-la-imagen-de-docker",level:3},{value:"Ejecuta algunos comandos importantes",id:"ejecuta-algunos-comandos-importantes",level:3},{value:"Lista todos los comandos disponibles",id:"lista-todos-los-comandos-disponibles",level:4},{value:"Respalda tus palabras de la seed phrase",id:"respalda-tus-palabras-de-la-seed-phrase",level:4},{value:"Abre un canal / Obt\xe9n liquidez entrante",id:"abre-un-canal--obt\xe9n-liquidez-entrante",level:4}];function c(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"nodo-de-lightning",children:"Nodo de Lightning"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.em,{children:["Omite esta p\xe1gina si est\xe1s usando Albyhub con LDK, y simplemente contin\xfaa directamente a ",(0,s.jsx)(n.a,{href:"hub#albyhub",children:"configurar Albyhub"}),"."]})}),"\n",(0,s.jsx)(n.h2,{id:"phoenixd",children:"Phoenixd"}),"\n",(0,s.jsx)(n.h3,{id:"instala-y-ejecuta-la-imagen-de-docker",children:"Instala y ejecuta la imagen de Docker"}),"\n",(0,s.jsxs)(n.p,{children:["Usaremos la imagen de Docker del ",(0,s.jsx)(n.a,{href:"https://github.com/sethforprivacy/phoenixd-docker/pkgs/container/phoenixd",children:"sethforprivacy's ghcr repo"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Primero crea el volumen de datos:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"docker volume create phoenixd_data"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Ahora ejecuta la imagen:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"docker run -d --name phoenixd -p 9740:9740 -v phoenixd_data:/phoenix --restart unless-stopped ghcr.io/sethforprivacy/phoenixd"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Opcionalmente puedes ",(0,s.jsx)(n.a,{href:"https://github.com/sethforprivacy/phoenixd-docker",children:"construirla t\xfa mismo"})," en lugar de descargarla desde ghcr","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"probablemente sea mejor hacerlo en una Mac con Apple Silicon, ya que el OPi tardar\xeda mucho en compilar"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"ejecuta-algunos-comandos-importantes",children:"Ejecuta algunos comandos importantes"}),"\n",(0,s.jsx)(n.h4,{id:"lista-todos-los-comandos-disponibles",children:"Lista todos los comandos disponibles"}),"\n",(0,s.jsx)(n.p,{children:"Una vez que el contenedor est\xe9 en ejecuci\xf3n, aseg\xfarate de listar todos los comandos disponibles:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"docker exec -it phoenixd /phoenix/bin/phoenix-cli --help\n"})}),"\n",(0,s.jsx)(n.h4,{id:"respalda-tus-palabras-de-la-seed-phrase",children:"Respalda tus palabras de la seed phrase"}),"\n",(0,s.jsxs)(n.p,{children:["Escribe tu seed phrase y gu\xe1rdala en un lugar secreto/seguro (",(0,s.jsx)(n.strong,{children:"MUY IMPORTANTE ANTES DE PONER DINERO EN EL NODO"}),"):"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"docker exec -it phoenixd cat /phoenix/.phoenix/seed.dat\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Phoenixd realizar\xe1 un respaldo cifrado de tu base de datos de canales y lo enviar\xe1 a ACINQ. Puede recuperarse usando tu semilla y se mantiene actualizado cada vez que cambia el estado de tu canal. Por lo tanto, si pierdes tu base de datos de canales, la semilla puede usarse para recuperar completamente tus fondos, siempre que conf\xedes en que ACINQ te devolver\xe1 tu informaci\xf3n cifrada."}),"\n",(0,s.jsx)(n.li,{children:"Esta es una de las formas en las que un nodo Lightning completo como CLN es m\xe1s soberano que Phoenixd. Pero siempre puedes actualizar m\xe1s adelante. Y si simplemente no pierdes tus datos (es decir, haces tus propios respaldos), entonces esta desventaja no aplica."}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"abre-un-canal--obt\xe9n-liquidez-entrante",children:"Abre un canal / Obt\xe9n liquidez entrante"}),"\n",(0,s.jsx)(n.p,{children:"Por defecto, phoenixd solicitar\xe1 2Msat de liquidez entrante del LSP de ACINQ cada vez que se quede sin liquidez entrante. Esto incluye, por supuesto, cuando inicias el nodo por primera vez y recibes tu primer pago. ACINQ cobra un 1% del monto solicitado, que equivale a 20ksat (m\xe1s la comisi\xf3n minera). Dado que 20ksat son aproximadamente US$20 al momento de escribir esto, y dado que no necesitamos tanta liquidez para un taller, configuramos phoenixd para que no solicite liquidez entrante."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"(Nota: si realmente deseas 2M sats de liquidez entrante, omite esto. Si eliges esta ruta, debes enviar ~25ksats como primer pago, la mayor parte ser\xe1 cobrada por ACINQ como tarifa)"}),":"]}),"\n",(0,s.jsx)(n.p,{children:"Edita la configuraci\xf3n de phoenixd:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'sudo nano "$(docker inspect -f \'{% raw %}{{ range .Mounts }}{{ if eq .Destination "/phoenix" }}{{ .Source }}/.phoenix/phoenix.conf{{ end }}{{ end }}{% endraw %}\' phoenixd)"\n'})}),"\n",(0,s.jsx)(n.p,{children:"Agrega estas dos l\xedneas al archivo de configuraci\xf3n (esto deber\xeda funcionar bien mientras las comisiones mineras sean menores a 5k):"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"auto-liquidity=off\nmax-mining-fee=5000\n"})}),"\n",(0,s.jsx)(n.p,{children:"Guarda y sal (ctrl+s, ctrl+x)."}),"\n",(0,s.jsx)(n.p,{children:"Reinicia tu contenedor para aplicar la nueva configuraci\xf3n:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"docker restart phoenixd\n"})}),"\n",(0,s.jsx)(n.p,{children:"Ahora deposita 5ksats en tu nodo:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'docker exec -it phoenixd /phoenix/bin/phoenix-cli createinvoice --amountSat=5000 --desc="initial deposit"\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Copia el bolt11 resultante (",(0,s.jsx)(n.code,{children:"lnbc..."}),")"]}),"\n",(0,s.jsx)(n.li,{children:"Crea un c\xf3digo QR de tu bolt11:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"qrencode -t ANSIUTF8 <lnbc....>\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Escan\xe9alo con tu billetera Lightning y realiza el pago"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\xa1Felicidades, ahora tienes un peque\xf1o servidor Lightning!"})," Vamos a conectar un sistema de punto de venta para que tus clientes puedan comprar en tu tienda con \xe9l."]})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>t});var a=i(6540);const s={},o=a.createContext(s);function r(e){const n=a.useContext(o);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),a.createElement(o.Provider,{value:n},e.children)}}}]);