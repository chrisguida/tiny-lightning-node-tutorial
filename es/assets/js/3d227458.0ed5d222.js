"use strict";(self.webpackChunktiny=self.webpackChunktiny||[]).push([[984],{4378:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"hub","title":"Lightning Hub","description":"Para actuar como conector con tus apps cliente, necesitar\xe1s LNBits o Albyhub, adem\xe1s de tu nodo Lightning.","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/hub.md","sourceDirName":".","slug":"/hub","permalink":"/tiny-lightning-node-tutorial/es/hub","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"Lightning Hub","sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Nodo de Lightning","permalink":"/tiny-lightning-node-tutorial/es/node"},"next":{"title":"App de Punto de Venta","permalink":"/tiny-lightning-node-tutorial/es/point-of-sale"}}');var r=i(4848),a=i(8453);const l={title:"Lightning Hub",sidebar_position:4},o="Lightning Hub",d={},c=[{value:"LNBits",id:"lnbits",level:2},{value:"Clona el repositorio",id:"clona-el-repositorio",level:3},{value:"Instala las dependencias",id:"instala-las-dependencias",level:3},{value:"Configura LNBits",id:"configura-lnbits",level:3},{value:"Servicio systemd",id:"servicio-systemd",level:3},{value:"LndHub",id:"lndhub",level:3},{value:"Instala y obt\xe9n el QR para los pagos",id:"instala-y-obt\xe9n-el-qr-para-los-pagos",level:4},{value:"Desactiva de nuevo LNBITS_ADMIN_UI",id:"desactiva-de-nuevo-lnbits_admin_ui",level:4},{value:"Albyhub",id:"albyhub",level:2},{value:"Desktop",id:"desktop",level:3},{value:"Docker (solo probado en Linux)",id:"docker-solo-probado-en-linux",level:3},{value:"docker-compose (aseg\xfarate de detener tu contenedor phoenixd anterior si eliges esta opci\xf3n)",id:"docker-compose-aseg\xfarate-de-detener-tu-contenedor-phoenixd-anterior-si-eliges-esta-opci\xf3n",level:4},{value:"Configura Albyhub con el backend seleccionado (necesario tanto en Escritorio como en Docker)",id:"configura-albyhub-con-el-backend-seleccionado-necesario-tanto-en-escritorio-como-en-docker",level:3}];function t(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"lightning-hub",children:"Lightning Hub"})}),"\n",(0,r.jsx)(n.p,{children:"Para actuar como conector con tus apps cliente, necesitar\xe1s LNBits o Albyhub, adem\xe1s de tu nodo Lightning."}),"\n",(0,r.jsx)(n.p,{children:"Haz clic para elegir un Lightning Hub como tu base de operaciones:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#lnbits",children:(0,r.jsx)(n.strong,{children:"LNBits"})})," se conecta pr\xe1cticamente con cualquier backend de Lightning"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#albyhub",children:(0,r.jsx)(n.strong,{children:"Albyhub"})})," se conecta a Phoenixd (recomendado), LDK (incluido con Albyhub), y LND."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"lnbits",children:"LNBits"}),"\n",(0,r.jsx)(n.h3,{id:"clona-el-repositorio",children:"Clona el repositorio"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"mkdir -p ~/code && cd ~/code\ngit clone https://github.com/lnbits/lnbits\ncd ~/code/lnbits\n"})}),"\n",(0,r.jsx)(n.h3,{id:"instala-las-dependencias",children:"Instala las dependencias"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"sudo apt install build-essential libsecp256k1-dev pkg-config python3-dev\n# install poetry\ncurl -sSL https://install.python-poetry.org | python3 -\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Aseg\xfarate de copiar y pegar el comando ",(0,r.jsx)(n.code,{children:"export"})," que muestra el instalador de poetry para poder ejecutar poetry desde tu shell actual. Si deseas instalar poetry de forma permanente, agrega este comando ",(0,r.jsx)(n.code,{children:"export"})," a tu archivo ",(0,r.jsx)(n.code,{children:"~/.bashrc"}),". Para probar si poetry funciona, ejecuta:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"poetry --version\n"})}),"\n",(0,r.jsx)(n.p,{children:"Si funcion\xf3, ahora tienes poetry y puedes pasar al siguiente paso:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"git checkout main\npoetry install --only main\n"})}),"\n",(0,r.jsx)(n.p,{children:"Si Poetry se queda colgado durante la instalaci\xf3n de dependencias, el problema puede resolverse desactivando keyring:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"poetry config keyring.enabled false\n"})}),"\n",(0,r.jsx)(n.h3,{id:"configura-lnbits",children:"Configura LNBits"}),"\n",(0,r.jsx)(n.p,{children:"Copia al portapapeles el http-password desde phoenix.conf"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"docker exec -it phoenixd cat /phoenix/.phoenix/phoenix.conf | grep http-password=\n"})}),"\n",(0,r.jsx)(n.p,{children:"Ahora crea y edita el archivo .env"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"cp .env.example .env\nnano .env\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Cambia ",(0,r.jsx)(n.code,{children:"HOST=127.0.0.1"})," a ",(0,r.jsx)(n.code,{children:"HOST=0.0.0.0"})]}),"\n",(0,r.jsxs)(n.li,{children:["Cambia ",(0,r.jsx)(n.code,{children:"LNBITS_BACKEND_WALLET_CLASS=VoidWallet"})," a ",(0,r.jsx)(n.code,{children:"LNBITS_BACKEND_WALLET_CLASS=PhoenixdWallet"})]}),"\n",(0,r.jsxs)(n.li,{children:["Busca la secci\xf3n ",(0,r.jsx)(n.code,{children:"# PhoenixdWallet"})," y cambia la l\xednea que dice ",(0,r.jsx)(n.code,{children:"PHOENIXD_API_PASSWORD=PHOENIXD_KEY"})," por ",(0,r.jsx)(n.code,{children:"PHOENIXD_API_PASSWORD=<pega tu http-password>"})]}),"\n",(0,r.jsx)(n.li,{children:"Ctrl+s luego Ctrl+x para guardar y salir"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"servicio-systemd",children:"Servicio systemd"}),"\n",(0,r.jsxs)(n.p,{children:["Sigue las instrucciones para ",(0,r.jsx)(n.a,{href:"https://github.com/lnbits/lnbits/blob/main/docs/guide/installation.md#lnbits-as-a-systemd-service",children:"instalar LNBits como servicio systemd"})," (repeated here for your convenience):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"sudo nano /etc/systemd/system/lnbits.service\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Copia y pega lo siguiente en el archivo (ctrl+shift+v para pegar en linux o cmd+v en mac) (",(0,r.jsx)(n.strong,{children:'NOTA: Si no usas un orangepi para este tutorial, aseg\xfarate de reemplazar todas las apariciones de "orangepi" por tu usuario real'}),"):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# Systemd unit for lnbits\n# /etc/systemd/system/lnbits.service\n\n[Unit]\nDescription=LNbits\n# you can uncomment these lines if you know what you're doing\n# it will make sure that lnbits starts after lnd (replace with your own backend service)\n#Wants=lnd.service\n#After=lnd.service\n\n[Service]\n# replace with the absolute path of your lnbits installation\nWorkingDirectory=/home/orangepi/code/lnbits\n# same here. run `which poetry` if you can't find the poetry binary\nExecStart=/home/orangepi/.local/bin/poetry run lnbits\n# replace with the user that you're running lnbits on\nUser=orangepi\nRestart=always\nTimeoutSec=120\nRestartSec=30\nEnvironment=PYTHONUNBUFFERED=1\n\n[Install]\nWantedBy=multi-user.target\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Ctrl+s, Ctrl+x para guardar y salir"}),"\n",(0,r.jsx)(n.li,{children:"Habilita lnbits para que inicie al arrancar el sistema y arr\xe1ncalo:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"sudo systemctl enable lnbits.service\nsudo systemctl start lnbits.service\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Verifica que lnbits est\xe9 conectado a phoenixd. Revisa los logs y aseg\xfarate de ver ",(0,r.jsx)(n.code,{children:"PhoenixdWallet"}),", no ",(0,r.jsx)(n.code,{children:"VoidWallet"}),":"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"sudo journalctl -u lnbits -ef"})}),"\n",(0,r.jsx)(n.p,{children:"En algunos sistemas puedes necesitar esto en su lugar:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"sudo tail -f /var/log/syslog"})}),"\n",(0,r.jsx)(n.p,{children:"Una vez que lnbits est\xe9 corriendo y conectado a phoenixd correctamente, deber\xedas habilitar la interfaz de administraci\xf3n (admin UI) para poder instalar la extensi\xf3n LNDHub:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"nano .env\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Cambia ",(0,r.jsx)(n.code,{children:"LNBITS_ADMIN_UI=false"})," a ",(0,r.jsx)(n.code,{children:"LNBITS_ADMIN_UI=true"})," (",(0,r.jsx)(n.strong,{children:"ATENCI\xd3N A LA NOTA SUPERIOR EXPLICANDO QUE EL RESTO DE LA CONFIGURACI\xd3N SE IGNORA CUANDO ESTA OPCI\xd3N EST\xc1 ACTIVA"}),")"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Contin\xfaa con el siguiente paso para instalar LNDHub. Una vez instalado, puedes desactivar la admin UI de nuevo."}),"\n",(0,r.jsx)(n.h3,{id:"lndhub",children:"LndHub"}),"\n",(0,r.jsx)(n.h4,{id:"instala-y-obt\xe9n-el-qr-para-los-pagos",children:"Instala y obt\xe9n el QR para los pagos"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Ingresa al portal de superusuario de lnbits desde tu navegador (",(0,r.jsx)(n.code,{children:"http://<IP LAN de orangepi, igual que SSH>:5000"}),")"]}),"\n",(0,r.jsx)(n.li,{children:"Crea un nombre de usuario y contrase\xf1a, asegur\xe1ndote de guardar el enlace de tu wallet en un lugar seguro, como un gestor de contrase\xf1as."}),"\n",(0,r.jsxs)(n.li,{children:["Haz clic en ",(0,r.jsx)(n.code,{children:"Extensions"})]}),"\n",(0,r.jsxs)(n.li,{children:["Haz clic en ",(0,r.jsx)(n.code,{children:"All"})]}),"\n",(0,r.jsx)(n.li,{children:'Busca "lndhub" en la barra de b\xfasqueda'}),"\n",(0,r.jsxs)(n.li,{children:["Encuentra la extensi\xf3n ",(0,r.jsx)(n.code,{children:"LndHub"})," y haz clic en ",(0,r.jsx)(n.code,{children:"Manage"})]}),"\n",(0,r.jsx)(n.li,{children:"Haz clic en el men\xfa desplegable que aparece y selecciona la \xfaltima versi\xf3n disponible (0.5.0 al momento de escribir esto)"}),"\n",(0,r.jsxs)(n.li,{children:["Ser\xe1s llevado a la p\xe1gina ",(0,r.jsx)(n.code,{children:"Installed"})]}),"\n",(0,r.jsxs)(n.li,{children:["Haz clic en ",(0,r.jsx)(n.code,{children:"Enable"})," en la extensi\xf3n ",(0,r.jsx)(n.code,{children:"LndHub"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Aparecer\xe1 un \xedtem de ",(0,r.jsx)(n.code,{children:"LndHub"})," bajo el t\xedtulo ",(0,r.jsx)(n.code,{children:"Extensions"})," en la izquierda de tu ventana. Haz clic ah\xed."]}),"\n",(0,r.jsx)(n.li,{children:'Se te mostrar\xe1n 2 c\xf3digos QR. El de la izquierda es la "invoice URL" y el de la derecha la "admin URL". Usaremos la "invoice URL" para configurar tu dispositivo de punto de venta.'}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"desactiva-de-nuevo-lnbits_admin_ui",children:"Desactiva de nuevo LNBITS_ADMIN_UI"}),"\n",(0,r.jsx)(n.p,{children:"Una vez instalado LNDHub, debes desactivar de nuevo LNBITS_ADMIN_UI en LNBits. Vuelve a tu terminal y edita el archivo .env de LNBits:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"nano ~/code/lnbits/.env\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Cambia ",(0,r.jsx)(n.code,{children:"LNBITS_ADMIN_UI=true"})," a ",(0,r.jsx)(n.code,{children:"LNBITS_ADMIN_UI=false"})]}),"\n",(0,r.jsx)(n.p,{children:"Guarda y cierra (ctrl+s, ctrl+x)"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\xa1Ahora conecta tu app de punto de venta! (Zeus si usas LNBits con LNDHub)"})}),"\n",(0,r.jsx)(n.h2,{id:"albyhub",children:"Albyhub"}),"\n",(0,r.jsx)(n.p,{children:"Albyhub es una manera r\xe1pida de empezar a aceptar pagos Lightning. En este tutorial lo usaremos con uno de dos backends:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"LDK (incluido con Albyhub), o"}),"\n",(0,r.jsx)(n.li,{children:"Phoenixd"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Puedes ejecutar albyhub en muchos entornos:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Escritorio/laptop"}),"\n",(0,r.jsx)(n.li,{children:"Docker (para orangepi o vps)"}),"\n",(0,r.jsx)(n.li,{children:"Nodos preconfigurados como Start9 (por ahora no funciona con phoenixd)"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"desktop",children:"Desktop"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Instala la \xfaltima versi\xf3n desde ",(0,r.jsx)(n.a,{href:"https://github.com/getAlby/hub/releases",children:"aqu\xed"})," (",(0,r.jsx)(n.a,{href:"https://github.com/getAlby/hub/releases/tag/v1.14.2",children:"v1.14.2"})," al momento de escribir esto)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Elige el archivo comprimido apropiado para tu sistema operativo"}),"\n",(0,r.jsx)(n.li,{children:"Extrae el archivo en un directorio conveniente"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:['Ejecuta el binario "Alby Hub"',"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["En Linux es ",(0,r.jsx)(n.code,{children:"./albyhub-Desktop-Linux/albyhub-Desktop-Linux/bin/Alby\\ Hub"})," desde el directorio donde descomprimiste el archivo"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"docker-solo-probado-en-linux",children:"Docker (solo probado en Linux)"}),"\n",(0,r.jsx)(n.p,{children:"\xa1Docker facilita la configuraci\xf3n de Albyhub!"}),"\n",(0,r.jsx)(n.h4,{id:"docker-compose-aseg\xfarate-de-detener-tu-contenedor-phoenixd-anterior-si-eliges-esta-opci\xf3n",children:"docker-compose (aseg\xfarate de detener tu contenedor phoenixd anterior si eliges esta opci\xf3n)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Ideal para correr Albyhub y Phoenixd juntos."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Instala docker-compose:"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose\nsudo chmod +x /usr/local/bin/docker-compose\n'})}),"\n",(0,r.jsx)(n.p,{children:"Crea un directorio para los datos de albyhub:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"mkdir -p albyhub && cd albyhub\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Crea y edita ",(0,r.jsx)(n.code,{children:"docker-compose.yml"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Crea:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"nano docker-compose.yml\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Pega:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'services:\n  albyhub:\n    container_name: albyhub\n    image: ghcr.io/getalby/hub:latest\n    volumes:\n      - ./albyhub-phoenixd:/data\n    ports:\n      - "8080:8080"\n    links:\n      - "albyhub-phoenixd:albyhub-phoenixd"\n    environment:\n      - WORK_DIR=/data/albyhub\n      - LOG_EVENTS=true\n\n  albyhub-phoenixd:\n    platform: linux/arm64\n    image: ghcr.io/sethforprivacy/phoenixd:latest\n    container_name: albyhub-phoenixd\n    ports:\n      - "9740:9740"\n    volumes:\n      - phoenixd_data:/phoenix\n    command: --agree-to-terms-of-service --http-bind-ip 0.0.0.0\n\nvolumes:\n  phoenixd_data:\n    external: true\n'})}),"\n",(0,r.jsx)(n.h3,{id:"configura-albyhub-con-el-backend-seleccionado-necesario-tanto-en-escritorio-como-en-docker",children:"Configura Albyhub con el backend seleccionado (necesario tanto en Escritorio como en Docker)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Para LDK, usa el valor por defecto.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Deber\xe1s adquirir liquidez entrante comprando un canal a un LSP."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:['Para Phoenixd, selecciona "advanced" y luego "connect custom node" al iniciar la configuraci\xf3n.',"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"No puedes cambiar esto despu\xe9s sin borrar los datos de Albyhub, as\xed que hazlo bien la primera vez."}),"\n",(0,r.jsxs)(n.li,{children:["Usa ",(0,r.jsx)(n.code,{children:"http://127.0.0.1:9740"})," (o la IP de tu LAN si es en otro equipo) para Escritorio, y ",(0,r.jsx)(n.code,{children:"http://albyhub-phoenixd:9740"})," si es en docker-compose."]}),"\n",(0,r.jsxs)(n.li,{children:["Obt\xe9n tu ",(0,r.jsx)(n.code,{children:"http-password"})," de Phoenixd como se describe en la ",(0,r.jsx)(n.a,{href:"#configura-lnbits",children:"secci\xf3n LNBits de arriba"}),', y p\xe9galo en el campo "Authorization" de Albyhub Desktop.']}),"\n",(0,r.jsxs)(n.li,{children:["Ya debiste haber adquirido liquidez entrante al configurar ",(0,r.jsx)(n.a,{href:"node",children:"Phoenixd en el paso anterior"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\xa1Felicidades, ya tienes tu Lightning Hub configurado!"})}),"\n",(0,r.jsx)(n.p,{children:"Sigue leyendo para conectar la app de punto de venta para tus trabajadores."})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>o});var s=i(6540);const r={},a=s.createContext(r);function l(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);